<?php

$negozi = [
    "0101"=>["ip"=>"192.168.201.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0102"=>["ip"=>"192.168.202.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0103"=>["ip"=>"192.168.203.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0105"=>["ip"=>"192.168.205.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0106"=>["ip"=>"192.168.206.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0107"=>["ip"=>"192.168.207.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0108"=>["ip"=>"192.168.208.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0109"=>["ip"=>"192.168.209.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0110"=>["ip"=>"192.168.210.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0111"=>["ip"=>"192.168.223.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0113"=>["ip"=>"192.168.213.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0114"=>["ip"=>"192.168.17.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0115"=>["ip"=>"192.168.4.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0119"=>["ip"=>"192.168.219.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0121"=>["ip"=>"192.168.121.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0122"=>["ip"=>"192.168.122.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0123"=>["ip"=>"192.168.123.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0124"=>["ip"=>"192.168.224.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0125"=>["ip"=>"192.168.225.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0126"=>["ip"=>"192.168.26.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0127"=>["ip"=>"192.168.227.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0128"=>["ip"=>"192.168.228.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0129"=>["ip"=>"192.168.18.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0131"=>["ip"=>"192.168.3.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0132"=>["ip"=>"192.168.13.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0133"=>["ip"=>"192.168.233.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0134"=>["ip"=>"11.0.34.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0136"=>["ip"=>"192.168.236.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0138"=>["ip"=>"192.168.238.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0139"=>["ip"=>"192.168.239.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0140"=>["ip"=>"192.168.240.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0141"=>["ip"=>"192.168.7.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0142"=>["ip"=>"192.168.242.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0143"=>["ip"=>"192.168.243.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0144"=>["ip"=>"192.168.244.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0145"=>["ip"=>"192.168.245.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0146"=>["ip"=>"192.168.2.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0147"=>["ip"=>"192.168.6.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0148"=>["ip"=>"192.168.5.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0149"=>["ip"=>"192.168.15.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0153"=>["ip"=>"192.168.153.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0155"=>["ip"=>"192.168.155.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0156"=>["ip"=>"192.168.156.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0170"=>["ip"=>"192.168.9.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0171"=>["ip"=>"192.168.141.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0172"=>["ip"=>"192.168.172.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0173"=>["ip"=>"192.168.173.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0176"=>["ip"=>"192.168.176.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0177"=>["ip"=>"192.168.16.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0178"=>["ip"=>"192.168.12.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0179"=>["ip"=>"192.168.14.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0180"=>["ip"=>"192.168.11.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0181"=>["ip"=>"192.168.10.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0184"=>["ip"=>"192.168.184.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0185"=>["ip"=>"192.168.185.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0186"=>["ip"=>"192.168.186.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0188"=>["ip"=>"192.168.188.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0190"=>["ip"=>"192.168.190.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0461"=>["ip"=>"192.168.161.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0462"=>["ip"=>"192.168.162.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0463"=>["ip"=>"192.168.163.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0464"=>["ip"=>"192.168.164.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0465"=>["ip"=>"192.168.165.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0466"=>["ip"=>"192.168.166.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0467"=>["ip"=>"192.168.167.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "0468"=>["ip"=>"192.168.168.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "3151"=>["ip"=>"172.30.10.10","utente"=>"brix","password"=>"brix"],
    "3152"=>["ip"=>"172.30.18.7","utente"=>"brix","password"=>"brix"],
    "3650"=>["ip"=>"172.30.2.7","utente"=>"italfrutta","password"=>"italfrutta"],
    "3652"=>["ip"=>"172.30.30.7","utente"=>"brix","password"=>"brix"],
    "3654"=>["ip"=>"192.168.154.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "3657"=>["ip"=>"172.30.26.2","utente"=>"brix","password"=>"brix"],
    "3658"=>["ip"=>"172.30.13.7","utente"=>"brix","password"=>"brix"],
    "3659"=>["ip"=>"172.30.12.2","utente"=>"brix","password"=>"brix"],
    "3661"=>["ip"=>"192.168.170.10","utente"=>"italfrutta","password"=>"italfrutta"],
    "3665"=>["ip"=>"172.30.4.7","utente"=>"brix","password"=>"brix"],
    "3666"=>["ip"=>"172.30.6.7","utente"=>"brix","password"=>"brix"],
    "3668"=>["ip"=>"172.30.27.2","utente"=>"brix","password"=>"brix"],
    "3670"=>["ip"=>"172.30.1.2","utente"=>"brix","password"=>"brix"],
    "3671"=>["ip"=>"172.30.8.7","utente"=>"italfrutta","password"=>"italfrutta"],
    "3673"=>["ip"=>"172.30.29.7","utente"=>"italfrutta","password"=>"italfrutta"],
    "3674"=>["ip"=>"172.30.25.7","utente"=>"italfrutta","password"=>"italfrutta"],
    "3675"=>["ip"=>"172.30.14.2","utente"=>"brix","password"=>"brix"],
    "3682"=>["ip"=>"172.30.0.2","utente"=>"brix","password"=>"brix"],
    "3683"=>["ip"=>"172.30.37.7","utente"=>"brix","password"=>"brix"],
    "3687"=>["ip"=>"172.30.23.7","utente"=>"brix","password"=>"brix"],
    "3689"=>["ip"=>"172.30.7.7","utente"=>"brix","password"=>"brix"],
    "3692"=>["ip"=>"172.30.31.2","utente"=>"brix","password"=>"brix"],
    "3693"=>["ip"=>"172.30.33.2","utente"=>"brix","password"=>"brix"],
    "3694"=>["ip"=>"192.168.169.10","utente"=>"italfrutta","password"=>"italfrutta"]
];

$posizioneDati = '/promozioni_invio/offertee';

$connesso = false;

$connId = ftp_connect( '10.11.14.114' );
if ($connId) {
    if (@ftp_login( $connId, 'ced20', 'scrivi' )) {
        echo "Connected:";
        $connesso = true;
    }
} else {
    echo "Connection Unavailable: $negozio\n";
}
if ($connesso) {
    foreach ($negozi as $negozio => $dettagli) {
        if (!file_exists("$posizioneDati/$negozio")) {
            mkdir("$posizioneDati/$negozio", 0777, true);
        }

        if (ftp_chdir( $connId, "/D$negozio" )) {
            if (ftp_get( $connId, "$posizioneDati/$negozio/OFFERTEE", "OFFERTEE", FTP_BINARY )) {

            }
        }
    }
}
ftp_close( $connId );

foreach ($negozi as $negozio => $dettagli) {
    $connesso = false;

    $connId = ftp_connect( $dettagli['ip'] );
    if ($connId) {
        if (@ftp_login( $connId, 'manager', 'manager' )) {
            echo "Connected: $negozio: ";
            $connesso = true;
        }
    } else {
        echo "Connection Unavailable: $negozio\n";
    }

    if ($connesso) {
        if (ftp_chdir( $connId, "\cobol\dat" )) {
            if (ftp_put( $connId, "OFFERTEE", "$posizioneDati/$negozio/OFFERTEE", FTP_BINARY )) {
                echo "cobol ok,  ";
            }
        }
        if (ftp_chdir( $connId, "\copia" )) {
            if (ftp_put( $connId, "OFFERTEE", "$posizioneDati/$negozio/OFFERTEE", FTP_BINARY )) {
                echo "copia ok\n";
            }
        }
        ftp_close( $connId );
    }
}


