<?php

$negozi = [
    ['codice' => '0101', 'descrizione' => 'PIAVE', 'ip_bo' => '192.168.201.10', 'ip_mtx' => '192.168.201.11', 'email' => 'piave@italmark.com'],
    ['codice' => '0102', 'descrizione' => 'MARCHETTI', 'ip_bo' => '192.168.202.10', 'ip_mtx' => '192.168.202.11', 'email' => 'marchetti@italmark.com'],
    ['codice' => '0103', 'descrizione' => 'COLLEBEATO', 'ip_bo' => '192.168.203.10', 'ip_mtx' => '192.168.203.11', 'email' => 'collebeato@italmark.com'],
    ['codice' => '0104', 'descrizione' => 'ROSA', 'ip_bo' => '192.168.204.10', 'ip_mtx' => '192.168.204.11', 'email' => 'rosa@italmark.com'],
    ['codice' => '0105', 'descrizione' => 'MOMPIANO', 'ip_bo' => '192.168.205.10', 'ip_mtx' => '192.168.205.11', 'email' => 'mompiano@italmark.com'],
    ['codice' => '0106', 'descrizione' => 'ARGENTINA', 'ip_bo' => '192.168.206.10', 'ip_mtx' => '192.168.206.11', 'email' => 'argentina@italmark.com'],
    ['codice' => '0107', 'descrizione' => 'PIADENA', 'ip_bo' => '192.168.207.10', 'ip_mtx' => '192.168.207.11', 'email' => 'piadena@italmark.com'],
    ['codice' => '0108', 'descrizione' => 'DESENZANO', 'ip_bo' => '192.168.208.10', 'ip_mtx' => '192.168.208.11', 'email' => 'desenzano@italmark.com'],
    ['codice' => '0109', 'descrizione' => 'SALO\'', 'ip_bo' => '192.168.209.10', 'ip_mtx' => '192.168.209.11', 'email' => 'salo.vecchio@italmark.com'],
    ['codice' => '0110', 'descrizione' => 'SAREZZO', 'ip_bo' => '192.168.210.10', 'ip_mtx' => '192.168.210.11', 'email' => 'sarezzo@italmark.com'],
    ['codice' => '0111', 'descrizione' => 'VALCENTER', 'ip_bo' => '192.168.223.10', 'ip_mtx' => '192.168.223.11', 'email' => 'vestone@italmark.com'],
    ['codice' => '0113', 'descrizione' => 'LENO', 'ip_bo' => '192.168.213.10', 'ip_mtx' => '192.168.213.11', 'email' => 'leno@italmark.com'],
    ['codice' => '0114', 'descrizione' => 'ROE\' VOLCIANO', 'ip_bo' => '192.168.17.10', 'ip_mtx' => '192.168.17.11', 'email' => 'roevolciano@italmark.com'],
    ['codice' => '0115', 'descrizione' => 'PALAZZOLO', 'ip_bo' => '192.168.4.10', 'ip_mtx' => '192.168.4.11', 'email' => 'palazzolo@italmark.com'],
    ['codice' => '0119', 'descrizione' => 'PRALBOINO', 'ip_bo' => '192.168.219.10', 'ip_mtx' => '192.168.219.11', 'email' => 'pralboino@italmark.com'],
    ['codice' => '0121', 'descrizione' => 'BREGNANO', 'ip_bo' => '192.168.121.10', 'ip_mtx' => '192.168.121.11', 'email' => 'bregnano@italmark.com'],
    ['codice' => '0122', 'descrizione' => 'COGLIATE', 'ip_bo' => '192.168.122.10', 'ip_mtx' => '192.168.122.11', 'email' => 'cogliate@italmark.com'],
    ['codice' => '0123', 'descrizione' => 'SOVERE', 'ip_bo' => '192.168.123.10', 'ip_mtx' => '192.168.123.11', 'email' => 'sovere@italmark.com'],
    ['codice' => '0124', 'descrizione' => 'MOZZANICA', 'ip_bo' => '192.168.224.10', 'ip_mtx' => '192.168.224.11', 'email' => 'mozzanica@italmark.com'],
    ['codice' => '0125', 'descrizione' => 'CISANO', 'ip_bo' => '192.168.225.10', 'ip_mtx' => '192.168.225.11', 'email' => 'cisano@italmark.com'],
    ['codice' => '0126', 'descrizione' => 'CORNATE', 'ip_bo' => '192.168.26.10', 'ip_mtx' => '192.168.26.11', 'email' => 'cornate@italmark.com'],
    ['codice' => '0127', 'descrizione' => 'MANERBIO', 'ip_bo' => '192.168.227.10', 'ip_mtx' => '192.168.227.11', 'email' => 'manerbio@italmark.com'],
    ['codice' => '0128', 'descrizione' => 'NEW-SALO\'', 'ip_bo' => '192.168.228.10', 'ip_mtx' => '192.168.228.11', 'email' => 'salo.nuovo@italmark.com'],
    ['codice' => '0129', 'descrizione' => 'CASTEL GOFFREDO', 'ip_bo' => '192.168.18.10', 'ip_mtx' => '192.168.18.11', 'email' => 'castelgoffredo@italmark.com'],
    ['codice' => '0131', 'descrizione' => 'CHIARI', 'ip_bo' => '192.168.3.10', 'ip_mtx' => '192.168.3.11', 'email' => 'chiari@italmark.com'],
    ['codice' => '0132', 'descrizione' => 'PISOGNE', 'ip_bo' => '192.168.13.10', 'ip_mtx' => '192.168.13.11', 'email' => 'pisogne@italmark.com'],
    ['codice' => '0133', 'descrizione' => 'ALBERTANO', 'ip_bo' => '192.168.233.10', 'ip_mtx' => '192.168.233.11', 'email' => 'albertano@italmark.com'],
    ['codice' => '0134', 'descrizione' => 'S.EUFEMIA', 'ip_bo' => '11.0.34.10', 'ip_mtx' => '11.0.34.11', 'email' => 's.eufemia@italmark.com'],
    ['codice' => '0136', 'descrizione' => 'PAVIA', 'ip_bo' => '192.168.236.10', 'ip_mtx' => '192.168.236.11', 'email' => 'pavia@italmark.com'],
    ['codice' => '0138', 'descrizione' => 'CANNETO', 'ip_bo' => '192.168.238.10', 'ip_mtx' => '192.168.238.11', 'email' => 'canneto@italmark.com'],
    ['codice' => '0139', 'descrizione' => 'GORLE SUPERM.', 'ip_bo' => '192.168.239.10', 'ip_mtx' => '192.168.239.11', 'email' => 'gorle@italmark.com'],
    ['codice' => '0140', 'descrizione' => 'ROCCAFRANCA', 'ip_bo' => '192.168.240.10', 'ip_mtx' => '192.168.240.11', 'email' => 'roccafranca@italmark.com'],
    ['codice' => '0141', 'descrizione' => 'ORZINUOVI', 'ip_bo' => '192.168.7.10', 'ip_mtx' => '192.168.7.11', 'email' => 'orzinuovi@italmark.com'],
    ['codice' => '0142', 'descrizione' => 'SARNICO', 'ip_bo' => '192.168.242.10', 'ip_mtx' => '192.168.242.11', 'email' => 'sarnico@italmark.com'],
    ['codice' => '0143', 'descrizione' => 'VEROLANUOVA', 'ip_bo' => '192.168.243.10', 'ip_mtx' => '192.168.243.11', 'email' => 'verolanuova@italmark.com'],
    ['codice' => '0144', 'descrizione' => 'QUINZANO', 'ip_bo' => '192.168.244.10', 'ip_mtx' => '192.168.244.11', 'email' => 'quinzano@italmark.com'],
    ['codice' => '0145', 'descrizione' => 'GHEDI', 'ip_bo' => '192.168.245.10', 'ip_mtx' => '192.168.245.11', 'email' => 'ghedi@italmark.com'],
    ['codice' => '0146', 'descrizione' => 'OSPITALETTO', 'ip_bo' => '192.168.2.10', 'ip_mtx' => '192.168.2.11', 'email' => 'ospitaletto@italmark.com'],
    ['codice' => '0147', 'descrizione' => 'CARPENEDOLO', 'ip_bo' => '192.168.6.10', 'ip_mtx' => '192.168.6.11', 'email' => 'carpenedolo@italmark.com'],
    ['codice' => '0148', 'descrizione' => 'ASOLA', 'ip_bo' => '192.168.5.10', 'ip_mtx' => '192.168.5.11', 'email' => 'asola@italmark.com'],
    ['codice' => '0149', 'descrizione' => 'VALEGGIO', 'ip_bo' => '192.168.15.10', 'ip_mtx' => '192.168.15.11', 'email' => 'valeggio@italmark.com'],
    ['codice' => '0153', 'descrizione' => 'SAN COLOMBANO', 'ip_bo' => '192.168.153.10', 'ip_mtx' => '192.168.153.11', 'email' => 'sancolombano@italmark.com'],
    ['codice' => '0155', 'descrizione' => 'TREVIGLIO', 'ip_bo' => '192.168.155.10', 'ip_mtx' => '192.168.155.11', 'email' => 'treviglio@italmark.com'],
    ['codice' => '0156', 'descrizione' => 'STEZZANO', 'ip_bo' => '192.168.156.10', 'ip_mtx' => '192.168.156.11', 'email' => 'stezzano@italmark.com'],
    ['codice' => '0170', 'descrizione' => 'GUSSAGO', 'ip_bo' => '192.168.9.10', 'ip_mtx' => '192.168.9.11', 'email' => 'gussago@italmark.com'],
    ['codice' => '0171', 'descrizione' => 'FRECCIAROSSA', 'ip_bo' => '192.168.141.10', 'ip_mtx' => '192.168.141.11', 'email' => 'frecciarossa@italmark.com'],
    ['codice' => '0172', 'descrizione' => 'ISORELLA', 'ip_bo' => '192.168.172.10', 'ip_mtx' => '192.168.172.11', 'email' => 'isorella@italmark.com'],
    ['codice' => '0173', 'descrizione' => 'MONTIRONE', 'ip_bo' => '192.168.173.10', 'ip_mtx' => '192.168.173.11', 'email' => 'montirone@italmark.com'],
    ['codice' => '0176', 'descrizione' => 'CASALMAGGIORE', 'ip_bo' => '192.168.176.10', 'ip_mtx' => '192.168.176.11', 'email' => 'casalmaggiore@italmark.com'],
    ['codice' => '0177', 'descrizione' => 'SONICO', 'ip_bo' => '192.168.16.10', 'ip_mtx' => '192.168.16.11', 'email' => 'sonico@italmark.com'],
    ['codice' => '0178', 'descrizione' => 'BAGNOLO MELLA', 'ip_bo' => '192.168.12.10', 'ip_mtx' => '192.168.12.11', 'email' => 'bagnolo@italmark.com'],
    ['codice' => '0179', 'descrizione' => 'VILLANUOVA SUL CLISI', 'ip_bo' => '192.168.14.10', 'ip_mtx' => '192.168.14.11', 'email' => 'villanuova@italmark.com'],
    ['codice' => '0180', 'descrizione' => 'MONIGA', 'ip_bo' => '192.168.11.10', 'ip_mtx' => '192.168.11.11', 'email' => 'moniga@italmark.com'],
    ['codice' => '0181', 'descrizione' => 'CREMONA', 'ip_bo' => '192.168.10.10', 'ip_mtx' => '192.168.10.11', 'email' => 'cremona@italmark.com'],
    ['codice' => '0184', 'descrizione' => 'SIRMIONE', 'ip_bo' => '192.168.184.10', 'ip_mtx' => '192.168.184.11', 'email' => 'sirmione@italmark.com'],
    ['codice' => '0185', 'descrizione' => 'MUGGIO\'', 'ip_bo' => '192.168.185.10', 'ip_mtx' => '192.168.185.11', 'email' => 'muggio@italmark.com'],
    ['codice' => '0186', 'descrizione' => 'CAIRATE', 'ip_bo' => '192.168.186.10', 'ip_mtx' => '192.168.186.11', 'email' => 'cairate@italmark.com'],
    ['codice' => '0188', 'descrizione' => 'CALCINATO 2', 'ip_bo' => '192.168.188.10', 'ip_mtx' => '192.168.188.11', 'email' => 'calcinato2@italmark.com'],
    ['codice' => '0190', 'descrizione' => 'GHEDI 2', 'ip_bo' => '192.168.190.10', 'ip_mtx' => '192.168.190.11', 'email' => 'ghedi2@italmark.com'],
    ['codice' => '0202', 'descrizione' => 'SONCINO', 'ip_bo' => '192.168.171.10', 'ip_mtx' => '192.168.171.11', 'email' => 'soncino@italmark.com'],
    ['codice' => '0461', 'descrizione' => 'ISEO', 'ip_bo' => '192.168.161.10', 'ip_mtx' => '192.168.161.11', 'email' => 'iseo@italmark.com'],
    ['codice' => '0462', 'descrizione' => 'CASTELLEONE', 'ip_bo' => '192.168.162.10', 'ip_mtx' => '192.168.162.11', 'email' => 'castelleone@italmark.com'],
    ['codice' => '0463', 'descrizione' => 'BEDIZZOLE', 'ip_bo' => '192.168.163.10', 'ip_mtx' => '192.168.163.11', 'email' => 'bedizzole@italmark.com'],
    ['codice' => '0464', 'descrizione' => 'GRUMELLO DEL MONTE', 'ip_bo' => '192.168.164.10', 'ip_mtx' => '192.168.164.11', 'email' => 'grumello@italmark.com'],
    ['codice' => '0465', 'descrizione' => 'SAN PANCRAZIO', 'ip_bo' => '192.168.165.10', 'ip_mtx' => '192.168.165.11', 'email' => 'palazzoloic@italmark.com'],
    ['codice' => '0466', 'descrizione' => 'TRESCORE BALNEARIO', 'ip_bo' => '192.168.166.10', 'ip_mtx' => '192.168.166.11', 'email' => 'trescore@italmark.com'],
    ['codice' => '0467', 'descrizione' => 'CAPRIOLO', 'ip_bo' => '192.168.167.10', 'ip_mtx' => '192.168.167.11', 'email' => 'capriolo@italmark.com'],
    ['codice' => '0468', 'descrizione' => 'SAN MARTINO SICCOMARIO', 'ip_bo' => '192.168.168.10', 'ip_mtx' => '192.168.168.11', 'email' => 'smartino@italmark.com'],
    ['codice' => '0501', 'descrizione' => 'ELNOS', 'ip_bo' => '192.168.31.10', 'ip_mtx' => '192.168.31.11', 'email' => 'roncadelle@itsmarket.it'],
    ['codice' => '3151', 'descrizione' => 'FLERO', 'ip_bo' => '172.30.10.10', 'ip_mtx' => '172.30.10.2', 'email' => 'superstore.flero@familymarket.org'],
    ['codice' => '3152', 'descrizione' => 'NAVE', 'ip_bo' => '172.30.18.7', 'ip_mtx' => '172.30.18.2', 'email' => 'superstore.nave@familymarket.org'],
    ['codice' => '3650', 'descrizione' => 'VIA CHIESA', 'ip_bo' => '172.30.2.7', 'ip_mtx' => '172.30.2.2', 'email' => 'family.chiesa@familymarket.org'],
    ['codice' => '3652', 'descrizione' => 'VOBARNO', 'ip_bo' => '172.30.30.7', 'ip_mtx' => '172.30.30.2', 'email' => 'family.vobarno@familymarket.org'],
    ['codice' => '3654', 'descrizione' => 'LUMEZZANE', 'ip_bo' => '192.168.154.10', 'ip_mtx' => '192.168.154.11', 'email' => 'family.lumezzane@familymarket.org'],
    ['codice' => '3657', 'descrizione' => 'TRAVAGLIATO 1', 'ip_bo' => '172.30.26.10', 'ip_mtx' => '172.30.26.2', 'email' => 'family.travagliato1@familymarket.org'],
    ['codice' => '3658', 'descrizione' => 'GAVARDO', 'ip_bo' => '172.30.13.7', 'ip_mtx' => '172.30.13.2', 'email' => 'family.gavardo@familymarket.org'],
    ['codice' => '3659', 'descrizione' => 'GARDONE V.T.', 'ip_bo' => '172.30.12.10', 'ip_mtx' => '172.30.12.2', 'email' => 'family.gardonevt@familymarket.org'],
    ['codice' => '3661', 'descrizione' => 'PADERNO F/C', 'ip_bo' => '192.168.170.10', 'ip_mtx' => '192.168.170.11', 'email' => 'family.paderno@familymarket.org'],
    ['codice' => '3665', 'descrizione' => 'CALVISANO', 'ip_bo' => '172.30.4.7', 'ip_mtx' => '172.30.4.2', 'email' => 'family.calvisano@familymarket.org'],
    ['codice' => '3666', 'descrizione' => 'CASTELMELLA 1', 'ip_bo' => '172.30.6.7', 'ip_mtx' => '172.30.6.2', 'email' => 'family.castelmella1@familymarket.org'],
    ['codice' => '3668', 'descrizione' => 'TRAVAGLIATO 2', 'ip_bo' => '172.30.27.10', 'ip_mtx' => '172.30.27.2', 'email' => 'family.travagliato2@familymarket.org'],
    ['codice' => '3670', 'descrizione' => 'BORGO S.GIACOMO', 'ip_bo' => '172.30.1.10', 'ip_mtx' => '172.30.1.2', 'email' => 'family.borgosgiacomo@familymarket.org'],
    ['codice' => '3671', 'descrizione' => 'CASTENEDOLO', 'ip_bo' => '172.30.8.7', 'ip_mtx' => '172.30.8.2', 'email' => 'family.castenedolo@familymarket.org'],
    ['codice' => '3673', 'descrizione' => 'VILLA CARCINA', 'ip_bo' => '172.30.29.7', 'ip_mtx' => '172.30.29.2', 'email' => 'family.villacarcina@familymarket.org'],
    ['codice' => '3674', 'descrizione' => 'SORESINA', 'ip_bo' => '172.30.25.7', 'ip_mtx' => '172.30.25.2', 'email' => 'family.soresina@familymarket.org'],
    ['codice' => '3675', 'descrizione' => 'GUIDIZZOLO', 'ip_bo' => '172.30.14.7', 'ip_mtx' => '172.30.14.2', 'email' => 'family.guidizzolo@familymarket.org'],
    ['codice' => '3682', 'descrizione' => 'BOARIO', 'ip_bo' => '172.30.0.7', 'ip_mtx' => '172.30.0.2', 'email' => 'family.boarioterme@familymarket.org'],
    ['codice' => '3683', 'descrizione' => 'COSTA VOLPINO', 'ip_bo' => '172.30.37.7', 'ip_mtx' => '172.30.37.2', 'email' => 'family.costavolpino@familymarket.org'],
    ['codice' => '3687', 'descrizione' => 'RAFFA DI PUEGNAGO', 'ip_bo' => '172.30.23.7', 'ip_mtx' => '172.30.23.2', 'email' => 'family.raffa@familymarket.org'],
    ['codice' => '3689', 'descrizione' => 'CASTELMELLA  2', 'ip_bo' => '172.30.7.7', 'ip_mtx' => '172.30.7.2', 'email' => 'family.castelmella2@familymarket.org'],
    ['codice' => '3692', 'descrizione' => 'NAVE BARCELLA', 'ip_bo' => '172.30.31.7', 'ip_mtx' => '172.30.31.2', 'email' => 'family.nave3@familymarket.org'],
    ['codice' => '3693', 'descrizione' => 'PIZZIGHETTONE', 'ip_bo' => '172.30.33.7', 'ip_mtx' => '172.30.33.2', 'email' => 'family.pizzighettone@familymarket.org'],
    ['codice' => '3694', 'descrizione' => 'AZZANO MELLA', 'ip_bo' => '192.168.169.10', 'ip_mtx' => '192.168.169.11', 'email' => 'family.azzano@familymarket.org'],
];

$posizioneDatiLocale = '/Users/Desktop/invioDati/';

$posizioneDatiRemota = '/';
$nomeFileRemoto = 'destFileName.ext';

foreach ($negozi as $negozio) {
    $nomeFileLocale = 'localFileName' . $negozio['codice']. '.ext';

    $connesso = false;

    $connId = ftp_connect( $negozio['ip_bo'] );
    if ($connId) {
        if (@ftp_login( $connId, 'italfrutta', 'scrivi' )) {
            echo "Connected Italfrutta: " . $negozio['descrizione'] ."\n";
            $connesso = true;
        } else {
            if (@ftp_login( $connId, 'manager', 'manager' )) {
                echo "Connected Manager: " . $negozio['descrizione'] ."\n";
                $connesso = true;
            } else {
                echo "Do Not Connected: " . $negozio['descrizione'] ."\n";
            }
        }
    } else {
        echo "Connection Unavailable: " . $negozio['descrizione'] ."\n";
    }

    if ($connesso) {
        $fileContent   = 'pdv=' . $negozio['codice'] . "\r\n";
        $fileContent  .= 'pdvname=' . $negozio['descrizione'] . "\r\n";
        $fileContent  .= 'mail=' . $negozio['email'] . "\r\n";
        $fileContent  .= 'ipjava=' . $negozio['ip_mtx'] . "\r\n";
        $fileContent  .= 'ipbo=' . $negozio['ip_bo'] . "\r\n";

        file_put_contents($posizioneDatiLocale . $nomeFileLocale, $fileContent);
        //$error = ftp_pwd( $connId);
        if (ftp_chdir( $connId, $posizioneDatiRemota )) {
            if (ftp_put( $connId, $nomeFileRemoto, $posizioneDatiLocale . $nomeFileLocale, FTP_BINARY )) {
                unlink( $nomeFileLocale ); // << se non vuoi cancellare il file dopo la trasmissione togli questa riga
            } else {
                echo $nomeFileLocale . ': File Non Inviato.';
            }
        }

        ftp_close( $connId );
    }

}